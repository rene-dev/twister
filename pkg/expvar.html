<!DOCTYPE html>
<html>
<head>
<title>Twister: expvar</title>
<link rel="stylesheet" href="../static/base.css" type="text/css"/> 
</head>
<body>
<div id="content"> 
<h1><a href="..">Twister</a>: expvar</h1>

<h4>Table Of Contents</h4>
<ul>
<li><a href="#package">Package</a>
<li><a href="#Publish">func Publish</a>
<li><a href="#ServeWeb">func ServeWeb</a>
<li><a href="#Func">type Func</a>
            <ul>
    <li><a href="#Func.MarshalJSON">func (Func) MarshalJSON</a>
            </ul>
<li><a href="#Int">type Int</a>
        <ul>
    <li><a href="#NewInt">func NewInt</a>
    <li><a href="#Int.Add">func (*Int) Add</a>
    <li><a href="#Int.MarshalJSON">func (*Int) MarshalJSON</a>
    <li><a href="#Int.Set">func (*Int) Set</a>
        </ul>
<li><a href="#Map">type Map</a>
        <ul>
    <li><a href="#NewMap">func NewMap</a>
    <li><a href="#Map.AddInt">func (*Map) AddInt</a>
    <li><a href="#Map.Get">func (*Map) Get</a>
    <li><a href="#Map.Init">func (*Map) Init</a>
    <li><a href="#Map.MarshalJSON">func (*Map) MarshalJSON</a>
    <li><a href="#Map.Set">func (*Map) Set</a>
        </ul>
<li><a href="#MarshalJSONFunc">type MarshalJSONFunc</a>
            <ul>
    <li><a href="#MarshalJSONFunc.MarshalJSON">func (MarshalJSONFunc) MarshalJSON</a>
            </ul>
</ul>

<h2 id="package">Package</h2>

<p><code>import "github.com/garyburd/twister/expvar"</code></p>

<p>
The expvar package provides an interface for registering and publishing
objects as JSON over HTTP. This is useful for publishing counters and other
operational data for monitoring tools.
</p>
<p>
The application should wrap the ServeWeb function in this package with
appropriate access control and register the resulting handler with a web
server.
</p>
<p>
This package differs from the standard library&#39;s expvar package in two ways:
This package does not have a dependency on the standard library&#39;s HTTP
server. This package uses the json.Marshaler interface for extensibility
instead of defining its own interface.
</p>




<h2 id="Publish">func <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L49">Publish</a></h2>
<p><code>func Publish(name string, v interface{})</code></p>
<p>
Publish adds v to the root level JSON object published by this package. The
value v is any type that can be encoded by calling json.Marshal. If a name
is already registered, then the function will panic. This function is
typically called from a package&#39;s init() function.
</p>

<h2 id="ServeWeb">func <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L159">ServeWeb</a></h2>
<p><code>func ServeWeb(req *web.Request)</code></p>


<h2 id="Func">type Func</h2>
<p>
Func wraps a func() interface{} with JSON marshalling of the returned
value. The function is called each time the object is marshaled.
</p>

<pre>type Func func() interface{}</pre>




    <h3 id="Func.MarshalJSON">func (Func) <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L71">MarshalJSON</a></h3>
    <p><code>func (f Func) MarshalJSON() ([]byte, os.Error)</code></p>
    

<h2 id="Int">type Int</h2>
<p>
Int is a synchronized wrapper around a 64-bit integer. The Int type is useful
implementing counters that can be updated by by concurrent goroutines.
</p>

<pre>type Int struct {
 // contains unexported fields
}</pre>



    <h3 id="NewInt">func <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L153">NewInt</a></h3>
    <p><code>func NewInt(name string) *Int</code></p>
    <p>
NewInt allocates a new counter and publishes it using name.
</p>


    <h3 id="Int.Add">func (*Int) <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L139">Add</a></h3>
    <p><code>func (i *Int) Add(delta int64)</code></p>
    <p>
Add atomically adds delta to the counter.
</p>

    <h3 id="Int.MarshalJSON">func (*Int) <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L134">MarshalJSON</a></h3>
    <p><code>func (i *Int) MarshalJSON() ([]byte, os.Error)</code></p>
    
    <h3 id="Int.Set">func (*Int) <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L146">Set</a></h3>
    <p><code>func (i *Int) Set(value int64)</code></p>
    <p>
Set atomically sets the counter to value.
</p>


<h2 id="Map">type Map</h2>
<p>
Map is a synchronized wrapper around a string-to-value map.
</p>

<pre>type Map struct {
 // contains unexported fields
}</pre>



    <h3 id="NewMap">func <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L82">NewMap</a></h3>
    <p><code>func NewMap(name string) *Map</code></p>
    <p>
NewMap allocates a new Map and publishes it using name.
</p>


    <h3 id="Map.AddInt">func (*Map) <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L113">AddInt</a></h3>
    <p><code>func (m *Map) AddInt(key string, delta int64)</code></p>
    <p>
AddInt adds delta to the *Int value stored for the given map key.
</p>

    <h3 id="Map.Get">func (*Map) <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L100">Get</a></h3>
    <p><code>func (m *Map) Get(key string) interface{}</code></p>
    
    <h3 id="Map.Init">func (*Map) <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L95">Init</a></h3>
    <p><code>func (m *Map) Init() *Map</code></p>
    
    <h3 id="Map.MarshalJSON">func (*Map) <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L89">MarshalJSON</a></h3>
    <p><code>func (m *Map) MarshalJSON() ([]byte, os.Error)</code></p>
    
    <h3 id="Map.Set">func (*Map) <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L106">Set</a></h3>
    <p><code>func (m *Map) Set(key string, v interface{})</code></p>
    

<h2 id="MarshalJSONFunc">type MarshalJSONFunc</h2>
<p>
The MarshalJSONFunc type is an adapter to allow the use of ordinary
functions as JSON marshallers. The function is called each time the object
is marshaled.
</p>

<pre>type MarshalJSONFunc func() ([]byte, os.Error)</pre>




    <h3 id="MarshalJSONFunc.MarshalJSON">func (MarshalJSONFunc) <a href="http://github.com/garyburd/twister/blob/master/expvar/expvar.go#L63">MarshalJSON</a></h3>
    <p><code>func (f MarshalJSONFunc) MarshalJSON() ([]byte, os.Error)</code></p>
    

<hr>
This page was generated automatically from the source code. If you installed
Twister using <a href="http://golang.org/cmd/goinstall/">goinstall</a>, then
you can also view the source documentation with <a
href="http://golang.org/cmd/godoc/">godoc</a>.  
</div>
</body>
</html>
